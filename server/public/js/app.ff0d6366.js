(function(){"use strict";var e={5455:function(e,t,o){var r=o(9242),s=o(3396);function l(e,t){const o=(0,s.up)("router-view");return(0,s.wg)(),(0,s.j4)(o)}var n=o(89);const a={},c=(0,n.Z)(a,[["render",l]]);var i=c,u=o(678);const d={class:"relative h-screen"},p=(0,s._)("div",{id:"map",class:"h-full z-[1]"},null,-1);function v(e,t,o,r,l,n){const a=(0,s.up)("GeoErrorModel"),c=(0,s.up)("MapFeatures");return(0,s.wg)(),(0,s.iD)("div",d,[r.geoError?((0,s.wg)(),(0,s.j4)(a,{key:0,onCloseGeoError:r.closeGeoError,geoErrorMsg:r.geoErrorMsg},null,8,["onCloseGeoError","geoErrorMsg"])):(0,s.kq)("",!0),(0,s.Wm)(c,{onGetGeolocation:r.getGeolocation,onPlotResult:r.plotResult,onToggleSearchResults:r.toggleSearchResults,onRemoveResult:r.removeResult,coords:r.coords,fetchCoords:r.fetchCoords,searchResults:r.searchResults},null,8,["onGetGeolocation","onPlotResult","onToggleSearchResults","onRemoveResult","coords","fetchCoords","searchResults"]),p])}var g=o(3153),m=o.n(g),f=o(4870),h=o(7139);const w={class:"h-screen absolute w-full z-10 flex justify-center items-start pt-[125px] bg-black/50"},x={class:"flex flex-col bg-white w-[80%] sm:w-[450px] px-6 py-4 rounded-md"},b={class:"mb-1 text-lg"},y=(0,s._)("p",{class:"mb-4 text-sm"}," To take advantage of this applications features, please ensure location services are enabled. ",-1);function R(e,t,o,r,l,n){return(0,s.wg)(),(0,s.iD)("div",w,[(0,s._)("div",x,[(0,s._)("h1",b,"Error: "+(0,h.zw)(o.geoErrorMsg),1),y,(0,s._)("button",{onClick:t[0]||(t[0]=t=>e.$emit("closeGeoError")),class:"self-start px-4 py-2 text-sm text-white bg-red-500 rounded-md"}," Close ")])])}var k={props:{geoErrorMsg:String}};const C=(0,n.Z)(k,[["render",R]]);var z=C;const _={class:"w-full md:w-auto absolute md:top-[40px] md:left-[40px] z-[2] flex gap-4 px-6 py-8 md:p-0 bg-transparent"},S={class:"relative flex-1 md:min-w-[350px]"},M=(0,s._)("div",{class:"absolute top-0 left-[8px] h-full flex items-center"},[(0,s._)("svg",{xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",focusable:"false",class:"w-5 h-5 text-slate-600",role:"img",viewBox:"0 0 512 512"},[(0,s._)("path",{fill:"currentColor",d:"M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"})])],-1),j={class:"absolute w-full mt-2"},G={key:0,class:"h-[200px] overflow-y-scroll bg-white rounded-md scrollbar-hidden shadow-md"},H=["onClick"],T=(0,s._)("svg",{xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",focusable:"false",class:"w-5 h-5 transition-colors duration-200 text-slate-600 group-hover:text-white",role:"img",viewBox:"0 0 384 512"},[(0,s._)("path",{fill:"currentColor",d:"M172.268 501.67C26.97 291.031 0 269.413 0 192 0 85.961 85.961 0 192 0s192 85.961 192 192c0 77.413-26.97 99.031-172.268 309.67-9.535 13.774-29.93 13.773-39.464 0zM192 272c44.183 0 80-35.817 80-80s-35.817-80-80-80-80 35.817-80 80 35.817 80 80 80z"})],-1),E={class:"text-xs"},O={key:1,class:"px-4 py-3 mt-2 bg-white rounded-md"},D=(0,s._)("path",{fill:"currentColor",d:"M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm0 448c-110.5 0-200-89.5-200-200S145.5 56 256 56s200 89.5 200 200-89.5 200-200 200zm101.8-262.2L295.6 256l62.2 62.2c4.7 4.7 4.7 12.3 0 17l-22.6 22.6c-4.7 4.7-12.3 4.7-17 0L256 295.6l-62.2 62.2c-4.7 4.7-12.3 4.7-17 0l-22.6-22.6c-4.7-4.7-4.7-12.3 0-17l62.2-62.2-62.2-62.2c-4.7-4.7-4.7-12.3 0-17l22.6-22.6c4.7-4.7 12.3-4.7 17 0l62.2 62.2 62.2-62.2c4.7-4.7 12.3-4.7 17 0l22.6 22.6c4.7 4.7 4.7 12.3 0 17z"},null,-1),L=[D],I={class:"text-lg"},F={class:"mb-1 text-xs"},J={class:"text-xs"},P=(0,s._)("path",{fill:"currentColor",d:"M444.52 3.52L28.74 195.42c-47.97 22.39-31.98 92.75 19.19 92.75h175.91v175.91c0 51.17 70.36 67.17 92.75 19.19l191.9-415.78c15.99-38.39-25.59-79.97-63.97-63.97z"},null,-1),Z=[P];function B(e,t,o,l,n,a){const c=(0,s.up)("LoadingSpinner");return(0,s.wg)(),(0,s.iD)("div",_,[(0,s._)("div",S,[(0,s.wy)((0,s._)("input",{type:"text",class:"w-full py-3 pr-4 text-sm rounded-md shadow-md pl-9 focus:outline-none",placeholder:"Start your search","onUpdate:modelValue":t[0]||(t[0]=e=>l.searchText=e),onInput:t[1]||(t[1]=(...e)=>l.search&&l.search(...e)),onFocus:t[2]||(t[2]=t=>e.$emit("toggleSearchResults"))},null,544),[[r.nr,l.searchText]]),M,(0,s._)("div",j,[l.searchText&&o.searchResults?((0,s.wg)(),(0,s.iD)("div",G,[l.searchData?((0,s.wg)(!0),(0,s.iD)(s.HY,{key:1},(0,s.Ko)(l.searchData,((e,t)=>((0,s.wg)(),(0,s.iD)("div",{class:"flex items-center px-4 py-2 transition-colors duration-200 cursor-pointer gap-x-2 group hover:bg-slate-600 hover:text-white",key:t,onClick:t=>l.selectResult(e)},[T,(0,s._)("p",E,(0,h.zw)(e.place_name_en),1)],8,H)))),128)):((0,s.wg)(),(0,s.j4)(c,{key:0}))])):(0,s.kq)("",!0),l.selectedResult?((0,s.wg)(),(0,s.iD)("div",O,[((0,s.wg)(),(0,s.iD)("svg",{onClick:t[3]||(t[3]=(...e)=>l.removeResult&&l.removeResult(...e)),xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",focusable:"false",class:"flex justify-end w-4 h-4 text-slate-600",role:"img",viewBox:"0 0 512 512"},L)),(0,s._)("h1",I,(0,h.zw)(l.selectedResult.text),1),(0,s._)("p",F,(0,h.zw)(l.selectedResult.properties.address)+", "+(0,h.zw)(l.selectedResult.city)+", "+(0,h.zw)(l.selectedResult.state),1),(0,s._)("p",J,(0,h.zw)(l.selectedResult.properties.category),1)])):(0,s.kq)("",!0)])]),(0,s._)("div",{class:(0,h.C_)(["px-4 flex items-center shadow-md rounded-md min-h-[45px]",[o.coords?"bg-slate-600":"bg-white"]]),onClick:t[4]||(t[4]=t=>e.$emit("getGeolocation"))},[((0,s.wg)(),(0,s.iD)("svg",{xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",focusable:"false",class:(0,h.C_)(["w-5 h-5",[o.coords?"text-white":"text-slate-600",o.fetchCoords?"animate-pulse":""]]),role:"img",viewBox:"0 0 512 512"},Z,2))],2)])}var V=o(6265),$=o.n(V);const q={class:"flex items-center justify-center w-full h-full"},W=(0,s._)("span",{class:"block w-[60px] h-[60px] border-[5px] border-solid border-transparent border-t-black rounded-full animate-spin"},null,-1),Y=[W];function Q(e,t,o,r,l,n){return(0,s.wg)(),(0,s.iD)("div",q,Y)}var U={name:"loadingSpinner"};const N=(0,n.Z)(U,[["render",Q]]);var X=N,A={props:{coords:Object,fetchCoords:Boolean,searchResults:Boolean},components:{LoadingSpinner:X},setup(e,{emit:t}){const o=(0,f.iH)(null),r=(0,f.iH)(null),s=(0,f.iH)(null),l=(0,f.iH)(null),n=()=>{clearTimeout(s.value),r.value=null,s.value=setTimeout((async()=>{if(""!==String(o.value).trim()){const t=new URLSearchParams({fuzzyMatch:!0,language:"en",limit:10,proximity:e.coords?`${e.coords.lng},${e.coords.lat}`:"0,0"}),s=await $().get(`api/search/${o.value}?${t}`);r.value=s.data.features}}),750)},a=e=>{l.value=e,t("plotResult",e.geometry)},c=()=>{l.value=null,t("removeResult")};return{searchText:o,searchData:r,searchTimeout:s,selectedResult:l,search:n,selectResult:a,removeResult:c}}};const K=(0,n.Z)(A,[["render",B]]);var ee=K,te={name:"HomeView",components:{GeoErrorModel:z,MapFeatures:ee},setup(){let e;(0,s.bv)((()=>{e=m().map("map",{zoomControl:!1,markerZoomAnimation:!1}).setView([-23.079797902304385,-47.21396312836137],10),m().tileLayer("https://api.mapbox.com/styles/v1/{id}/tiles/{z}/{x}/{y}?access_token=pk.eyJ1IjoibWFjaGFkb21hdHQiLCJhIjoiY2t5amdycWIwMTZ6czJucjBsaGMyYXFqdCJ9.gl4z9sfbHFkyCDPV2i-ILQ",{attribution:'Map data &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors, Imagery Â© <a href="https://www.mapbox.com/">Mapbox</a>',maxZoom:18,id:"mapbox/streets-v11",tileSize:512,zoomOffset:-1,accessToken:"pk.eyJ1IjoibWFjaGFkb21hdHQiLCJhIjoiY2t5amdycWIwMTZ6czJucjBsaGMyYXFqdCJ9.gl4z9sfbHFkyCDPV2i-ILQ"}).addTo(e),e.on("moveend",(()=>{x()})),u()}));const t=(0,f.iH)(null),r=(0,f.iH)(null),l=(0,f.iH)(null),n=(0,f.iH)(null),a=(0,f.iH)(null),c=(0,f.iH)(null),i=(0,f.iH)(!1),u=()=>t.value?(t.value=null,sessionStorage.removeItem("coords"),void e.removeLayer(l.value)):sessionStorage.getItem("coords")?(t.value=JSON.parse(sessionStorage.getItem("coords")),void v(t.value)):(r.value=!0,void navigator.geolocation.getCurrentPosition(d,p)),d=e=>{r.value=null;const o={lat:e.coords.latitude,lng:e.coords.longitude};sessionStorage.setItem("coords",JSON.stringify(o)),t.value=o,v(t.value)},p=e=>{r.value=null,n.value=!0,a.value=e.message},v=t=>{const r=m().icon({iconUrl:o(9036),iconSize:[35,35]});l.value=m().marker([t.lat,t.lng],{icon:r}).addTo(e),e.setView([t.lat,t.lng],10)},g=()=>{n.value=null,a.value=null},h=t=>{c.value&&e.removeLayer(c.value);const r=m().icon({iconUrl:o(8274),iconSize:[35,35]});c.value=m().marker([t.coordinates[1],t.coordinates[0]],{icon:r}).addTo(e),e.setView([t.coordinates[1],t.coordinates[0]],14),x()},w=()=>{i.value=!i.value},x=()=>{i.value=!1},b=()=>{e.removeLayer(c.value)};return{coords:t,fetchCoords:r,getGeolocation:u,closeGeoError:g,geoError:n,geoErrorMsg:a,plotResult:h,searchResults:i,toggleSearchResults:w,closeSearchResults:x,removeResult:b}}};const oe=(0,n.Z)(te,[["render",v]]);var re=oe;const se=[{path:"/",name:"home",component:re}],le=(0,u.p7)({history:(0,u.PO)("/"),routes:se});var ne=le;(0,r.ri)(i).use(ne).mount("#app")},8274:function(e,t,o){e.exports=o.p+"img/map-marker-blue.cec4cef2.svg"},9036:function(e,t,o){e.exports=o.p+"img/map-marker-red.227ef547.svg"}},t={};function o(r){var s=t[r];if(void 0!==s)return s.exports;var l=t[r]={exports:{}};return e[r].call(l.exports,l,l.exports,o),l.exports}o.m=e,function(){var e=[];o.O=function(t,r,s,l){if(!r){var n=1/0;for(u=0;u<e.length;u++){r=e[u][0],s=e[u][1],l=e[u][2];for(var a=!0,c=0;c<r.length;c++)(!1&l||n>=l)&&Object.keys(o.O).every((function(e){return o.O[e](r[c])}))?r.splice(c--,1):(a=!1,l<n&&(n=l));if(a){e.splice(u--,1);var i=s();void 0!==i&&(t=i)}}return t}l=l||0;for(var u=e.length;u>0&&e[u-1][2]>l;u--)e[u]=e[u-1];e[u]=[r,s,l]}}(),function(){o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,{a:t}),t}}(),function(){o.d=function(e,t){for(var r in t)o.o(t,r)&&!o.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}}(),function(){o.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){o.p="/"}(),function(){var e={143:0};o.O.j=function(t){return 0===e[t]};var t=function(t,r){var s,l,n=r[0],a=r[1],c=r[2],i=0;if(n.some((function(t){return 0!==e[t]}))){for(s in a)o.o(a,s)&&(o.m[s]=a[s]);if(c)var u=c(o)}for(t&&t(r);i<n.length;i++)l=n[i],o.o(e,l)&&e[l]&&e[l][0](),e[l]=0;return o.O(u)},r=self["webpackChunkclient"]=self["webpackChunkclient"]||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}();var r=o.O(void 0,[998],(function(){return o(5455)}));r=o.O(r)})();
//# sourceMappingURL=app.ff0d6366.js.map